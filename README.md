This repository contains the code, data, and results from "Inference on the Effects of Observed Covariates in Latent Space Models for Networks" by [Zachary Jones](http://zmjones.com), [Matthew Denny](http://www.mjdenny.com/), [Bruce Desmarais](http://sites.psu.edu/desmaraisgroup/), and [Hanna Wallach](http://dirichlet.net/).

> Due to the complex interdependence found in relational data, political networks scholars draw upon an increasingly sophisticated toolkit for statistical inference. The latent space model (LSM) for network data combines a generalized linear model with a latent spatial embedding of the network. It is assumed that the latent spatial embedding can control for unmeasured confounding structure that is related to the values of edges in the network. There has been little to no research that considers the LSM's performance in adjusting for unmeasured structure. We investigate the LSM's performance via a simulation study. In the presence of an unmeasured covariate that can be modeled using a latent space, estimation and inferential error remain high under even moderate confounding. However, the prediction error of the LSM when unmeasured network structure is present is substantially lower in most cases. We conclude that the LSM is most appropriate for exploration or prediction.

This work was supported by National Science Foundation grants DGE-1144860, SES-1558661, SES-1619644, and CISE-1320219. Any opinions, findings, and conclusions or recommendations are those of the authors and do not necessarily reflect those of the sponsor.

The core of our analysis is a simulation study which is implemented with [BatchExperiments](https://cran.r-project.org/web/packages/BatchExperiments/index.html) (also see the [associated paper](https://www.jstatsoft.org/article/view/v064i11)). All code is in the `src` folder. Due to the computational expense of studying the behavior of the latent space model, this analysis was run on a Torque cluster. Thus, unless you aim to execute our code on another Torque cluster, it is necessary to modify `.BatchJobs.R`, `simulation.R` and possibly`template.tmpl`. Using `BatchJobs` (the library underlying `BatchExperiments`) it is possible to simply substitute the appropriate cluster function backend here (explanations on how to do this are contained in the documentation linked to as well as the paper mentioned).

The core of the simulation is contained in `simulation.R`. This file contains the parameter specifications of the simulation, the estimation functions, as well as the control parameters for parallelizing the simulation and submitting it to the relevant cluster backend defined in `.BatchJobs.R`. The object `resources` in `simulation.R` must be modified to match the resources of the system on which the code is executed.

`reduce.R` contains the code to take the result of `simulation.R`, which stores results in a database, and produce the performance/evaluation criteria described in the paper (prediction, inference, and estimation error). `reduce.R` is set up to execute in parallel on a cluster as well, though depending on the system on which the code executes, this may be unecessary. In that case (a sequential reduce step) the commented code can be used rather than the lines above (as described in the code).

`analysis.R` takes `results.csv` and produces the graphs in the paper.

`upload.txt` and `download.txt` specify the relevant files to upload/download from the custer system on which the simulation runs.
